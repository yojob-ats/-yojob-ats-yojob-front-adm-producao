import{l as w,r as i,i as g,c as l,g as h,a as e,b as x,t as c,s as C,w as S,d as T,e as p,v,f as E,o as r}from"./index-kKH9VJDc.js";import{_ as k}from"./SidebarRecruiter-DLGJijLr.js";import{s as m}from"./siteContent-DaZkGLVA.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"layout-wrapper"},$={class:"main-content"},D={class:"container"},N={class:"page-header"},M={class:"type-badge"},R={key:0,class:"card loading-state"},U={key:1,class:"card"},q={class:"form-group"},I={class:"form-group"},L={key:0,class:"form-group"},j=["value"],z={class:"form-actions"},A=["disabled"],F={__name:"EditSiteText",setup(G){const f=w(),y=E(),d=f.params.type,u=i(!0),n=i(!1),s=i({title:"",body:"",updated_at:null});g(async()=>{var a;try{const o=(await m.getByType(d)).data;s.value={title:o.title??"",body:o.body??o.content??"",updated_at:o.updated_at??null}}catch(t){((a=t.response)==null?void 0:a.status)!==404&&window.showError("Erro ao carregar conteúdo")}finally{u.value=!1}});async function _(){n.value=!0;try{await m.upsert(d,s.value),window.showSuccess("Conteúdo salvo com sucesso"),y.push("/textos-site")}catch{window.showError("Erro ao salvar conteúdo")}finally{n.value=!1}}const b=a=>a?new Date(a).toLocaleString("pt-BR"):"—";return(a,t)=>(r(),l("div",B,[h(k),e("main",$,[e("div",D,[e("header",N,[e("div",null,[t[5]||(t[5]=e("h1",null,"Editar Conteúdo",-1)),e("p",null,[t[4]||(t[4]=x("Tipo: ",-1)),e("span",M,c(C(d)),1)])]),e("button",{onClick:t[0]||(t[0]=o=>a.$router.push("/textos-site")),class:"btn btn-secondary"},"← Voltar")]),u.value?(r(),l("div",R,"Carregando...")):(r(),l("div",U,[e("form",{onSubmit:S(_,["prevent"])},[e("div",q,[t[6]||(t[6]=e("label",null,"Título",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.value.title=o),class:"form-control",type:"text",placeholder:"Título deste conteúdo"},null,512),[[v,s.value.title]])]),e("div",I,[t[7]||(t[7]=e("label",null,"Conteúdo",-1)),p(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.body=o),class:"form-control",rows:"12",required:"",placeholder:"Conteúdo..."},null,512),[[v,s.value.body]])]),s.value.updated_at?(r(),l("div",L,[t[8]||(t[8]=e("label",null,"Última edição",-1)),e("input",{value:b(s.value.updated_at),class:"form-control",readonly:""},null,8,j)])):T("",!0),e("div",z,[e("button",{type:"button",onClick:t[3]||(t[3]=o=>a.$router.push("/textos-site")),class:"btn btn-secondary"},"Cancelar"),e("button",{type:"submit",class:"btn btn-primary",disabled:n.value},c(n.value?"Salvando...":"Salvar"),9,A)])],32)]))])])]))}},P=V(F,[["__scopeId","data-v-3fa24c22"]]);export{P as default};
