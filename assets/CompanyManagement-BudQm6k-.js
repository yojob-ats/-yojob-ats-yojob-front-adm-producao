import{r as u,i as f,j as b,c as o,g as y,a as e,e as _,v as C,m as k,d as S,F as w,k as B,o as l,t as d,n as E}from"./index-BKKr9w70.js";import{_ as A}from"./SidebarRecruiter-DRdmGgpZ.js";import{b as L}from"./billing-CXYtw2mp.js";import{t as M}from"./apiHelper-nSI_QOaT.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"layout-wrapper"},$={class:"main-content"},x={class:"container"},F={class:"filters"},I={class:"card"},T={key:0,class:"loading-state"},q={key:1,class:"table-responsive"},D={class:"table"},P={key:0},R={class:"action-buttons"},U=["onClick"],j={__name:"CompanyManagement",setup(z){const c=u(""),r=u(""),p=u([]),m=u(!0);f(async()=>{try{const a=await L.getCompanies();console.log("API response:",a.data),p.value=M(a.data),console.log("Companies array:",p.value)}catch(a){console.error("Error loading companies:",a),window.showError("Erro ao carregar empresas")}finally{m.value=!1}});const v=b(()=>{const a=p.value.filter(t=>{var n;if(!t)return!1;const s=(n=t.name)==null?void 0:n.toLowerCase().includes(c.value.toLowerCase()),i=!r.value||t.status===r.value;return s&&i});return console.log("Filtered companies:",a),a}),g=a=>Number(a??0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),h=a=>({active:"Ativa",inactive:"Inativa",blocked:"Bloqueada"})[a]??a;return(a,t)=>(l(),o("div",V,[y(A),e("main",$,[e("div",x,[t[5]||(t[5]=e("header",{class:"page-header"},[e("div",null,[e("h1",null,"Gestão de Empresas"),e("p",null,"Administre todas as empresas cadastradas")])],-1)),e("div",F,[_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),type:"text",placeholder:"Buscar empresas...",class:"search-input"},null,512),[[C,c.value]]),_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value=s),class:"select-input"},[...t[2]||(t[2]=[e("option",{value:""},"Todos os Status",-1),e("option",{value:"active"},"Ativa",-1),e("option",{value:"inactive"},"Inativa",-1),e("option",{value:"blocked"},"Bloqueada",-1)])],512),[[k,r.value]])]),e("div",I,[m.value?(l(),o("div",T,"Carregando...")):(l(),o("div",q,[e("table",D,[t[4]||(t[4]=e("thead",null,[e("tr",null,[e("th",null,"Empresa"),e("th",null,"Plano"),e("th",null,"Status"),e("th",null,"Total Faturado"),e("th",null,"Ações")])],-1)),e("tbody",null,[v.value.length===0?(l(),o("tr",P,[...t[3]||(t[3]=[e("td",{colspan:"5",class:"empty-state"},"Nenhuma empresa encontrada",-1)])])):S("",!0),(l(!0),o(w,null,B(v.value,s=>{var i,n;return l(),o("tr",{key:s.id},[e("td",null,[e("strong",null,d(s.name),1)]),e("td",null,d(((n=(i=s.active_subscription)==null?void 0:i.plan)==null?void 0:n.name)??"—"),1),e("td",null,[e("span",{class:E(["badge",`badge-${s.status}`])},d(h(s.status)),3)]),e("td",null,d(g(s.receita_total??0)),1),e("td",R,[e("button",{onClick:G=>a.$router.push(`/gestao-empresas/editar/${s.id}`),class:"btn btn-sm btn-primary"},"Editar",8,U)])])}),128))])])]))])])])]))}},W=N(j,[["__scopeId","data-v-66cd1257"]]);export{W as default};
