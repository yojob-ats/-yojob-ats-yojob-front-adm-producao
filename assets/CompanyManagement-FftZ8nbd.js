import{r as u,i as h,j as f,c as o,g as y,a as e,e as _,v as C,m as k,d as S,F as w,k as B,o as n,t as d,n as E}from"./index-BQyMN7yE.js";import{_ as $}from"./SidebarRecruiter-Cjm4dI9A.js";import{b as A}from"./billing-CUF9lM6g.js";import{t as L}from"./apiHelper-CRUk9URl.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"layout-wrapper"},V={class:"main-content"},F={class:"container"},I={class:"page-header"},x={class:"filters"},T={class:"card"},q={key:0,class:"loading-state"},D={key:1,class:"table-responsive"},P={class:"table"},R={key:0},U={class:"action-buttons"},j=["onClick"],z={__name:"CompanyManagement",setup(G){const c=u(""),r=u(""),p=u([]),m=u(!0);h(async()=>{try{const s=await A.getCompanies();console.log("API response:",s.data),p.value=L(s.data),console.log("Companies array:",p.value)}catch(s){console.error("Error loading companies:",s),window.showError("Erro ao carregar empresas")}finally{m.value=!1}});const v=f(()=>{const s=p.value.filter(t=>{var l;if(!t)return!1;const a=(l=t.name)==null?void 0:l.toLowerCase().includes(c.value.toLowerCase()),i=!r.value||t.status===r.value;return a&&i});return console.log("Filtered companies:",s),s}),g=s=>Number(s??0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),b=s=>({active:"Ativa",inactive:"Inativa",blocked:"Bloqueada"})[s]??s;return(s,t)=>(n(),o("div",M,[y($),e("main",V,[e("div",F,[e("header",I,[t[3]||(t[3]=e("div",null,[e("h1",null,"Gestão de Empresas"),e("p",null,"Administre todas as empresas cadastradas")],-1)),e("button",{onClick:t[0]||(t[0]=a=>s.$router.push("/gestao-empresas/novo")),class:"btn btn-primary"},"+ Nova Empresa")]),e("div",x,[_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>c.value=a),type:"text",placeholder:"Buscar empresas...",class:"search-input"},null,512),[[C,c.value]]),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>r.value=a),class:"select-input"},[...t[4]||(t[4]=[e("option",{value:""},"Todos os Status",-1),e("option",{value:"active"},"Ativa",-1),e("option",{value:"inactive"},"Inativa",-1),e("option",{value:"blocked"},"Bloqueada",-1)])],512),[[k,r.value]])]),e("div",T,[m.value?(n(),o("div",q,"Carregando...")):(n(),o("div",D,[e("table",P,[t[6]||(t[6]=e("thead",null,[e("tr",null,[e("th",null,"Empresa"),e("th",null,"Plano"),e("th",null,"Status"),e("th",null,"Total Faturado"),e("th",null,"Ações")])],-1)),e("tbody",null,[v.value.length===0?(n(),o("tr",R,[...t[5]||(t[5]=[e("td",{colspan:"5",class:"empty-state"},"Nenhuma empresa encontrada",-1)])])):S("",!0),(n(!0),o(w,null,B(v.value,a=>{var i,l;return n(),o("tr",{key:a.id},[e("td",null,[e("strong",null,d(a.name),1)]),e("td",null,d(((l=(i=a.active_subscription)==null?void 0:i.plan)==null?void 0:l.name)??"—"),1),e("td",null,[e("span",{class:E(["badge",`badge-${a.status}`])},d(b(a.status)),3)]),e("td",null,d(g(a.receita_total??0)),1),e("td",U,[e("button",{onClick:Q=>s.$router.push(`/gestao-empresas/editar/${a.id}`),class:"btn btn-sm btn-primary"},"Editar",8,j)])])}),128))])])]))])])])]))}},X=N(z,[["__scopeId","data-v-2d6517b2"]]);export{X as default};
