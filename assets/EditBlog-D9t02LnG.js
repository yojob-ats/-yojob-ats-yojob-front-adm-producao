import{l as h,r as d,i as E,c as n,g as S,a as o,w as V,e as l,v as p,m as b,F as k,k as C,t as f,f as B,o as i}from"./index-BCuSKRxw.js";import{_ as U}from"./SidebarRecruiter-Dkd-uXNN.js";import{b as v}from"./blog-BJTUqb7b.js";import{t as x}from"./apiHelper-CRUk9URl.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"layout-wrapper"},$={class:"main-content"},M={class:"container"},D={class:"page-header"},I={key:0,class:"card loading-state"},P={key:1,class:"card"},q={class:"form-group"},F={class:"form-group"},N={class:"form-group"},T=["value"],z={class:"form-group"},L={class:"form-row"},j={class:"form-group"},G={class:"form-group"},H={class:"form-actions"},J=["disabled"],K={__name:"EditBlog",setup(O){const y=h(),_=B(),m=y.params.id,c=d(!0),u=d(!1),g=d([]),a=d({title:"",author:"",category_id:"",content:"",published_at:"",status:"draft"});E(async()=>{var r;try{const[t,s]=await Promise.all([v.getById(m),v.listCategories()]),e=t.data;a.value={title:e.title??"",author:e.author??"",category_id:e.category_id??((r=e.category)==null?void 0:r.id)??"",content:e.content??"",published_at:e.published_at?e.published_at.substring(0,10):"",status:e.status??"draft"},g.value=x(s.data)}catch{window.showError("Erro ao carregar artigo")}finally{c.value=!1}});async function w(){u.value=!0;try{await v.update(m,a.value),window.showSuccess("Artigo atualizado com sucesso"),_.push("/blog")}catch{window.showError("Erro ao salvar artigo")}finally{u.value=!1}}return(r,t)=>(i(),n("div",R,[S(U),o("main",$,[o("div",M,[o("header",D,[t[8]||(t[8]=o("div",null,[o("h1",null,"Editar Artigo"),o("p",null,"Edite os detalhes do artigo do blog")],-1)),o("button",{onClick:t[0]||(t[0]=s=>r.$router.push("/blog")),class:"btn btn-secondary"},"← Voltar")]),c.value?(i(),n("div",I,"Carregando artigo...")):(i(),n("div",P,[o("form",{onSubmit:V(w,["prevent"])},[o("div",q,[t[9]||(t[9]=o("label",null,"Título",-1)),l(o("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.title=s),class:"form-control",type:"text",required:""},null,512),[[p,a.value.title]])]),o("div",F,[t[10]||(t[10]=o("label",null,"Autor",-1)),l(o("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.author=s),class:"form-control",type:"text",required:""},null,512),[[p,a.value.author]])]),o("div",N,[t[12]||(t[12]=o("label",null,"Categoria",-1)),l(o("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.category_id=s),class:"form-control"},[t[11]||(t[11]=o("option",{value:""},"Selecione uma categoria",-1)),(i(!0),n(k,null,C(g.value,s=>(i(),n("option",{key:s.id,value:s.id},f(s.name),9,T))),128))],512),[[b,a.value.category_id]])]),o("div",z,[t[13]||(t[13]=o("label",null,"Conteúdo",-1)),l(o("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.content=s),class:"form-control",rows:"10"},null,512),[[p,a.value.content]])]),o("div",L,[o("div",j,[t[14]||(t[14]=o("label",null,"Data de Publicação",-1)),l(o("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.published_at=s),class:"form-control",type:"date"},null,512),[[p,a.value.published_at]])]),o("div",G,[t[16]||(t[16]=o("label",null,"Status",-1)),l(o("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>a.value.status=s),class:"form-control"},[...t[15]||(t[15]=[o("option",{value:"draft"},"Rascunho",-1),o("option",{value:"published"},"Publicado",-1)])],512),[[b,a.value.status]])])]),o("div",H,[o("button",{type:"button",onClick:t[7]||(t[7]=s=>r.$router.push("/blog")),class:"btn btn-secondary"},"Cancelar"),o("button",{type:"submit",class:"btn btn-primary",disabled:u.value},f(u.value?"Salvando...":"Salvar"),9,J)])],32)]))])])]))}},tt=A(K,[["__scopeId","data-v-b3e794ed"]]);export{tt as default};
