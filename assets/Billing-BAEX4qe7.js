import{r as i,i as y,j as w,c as l,g as k,a as t,d as p,t as n,F as h,k as g,e as C,v as B,o,n as E}from"./index-CBT-DF28.js";import{_ as L}from"./SidebarRecruiter-DDRAIM96.js";import{b}from"./billing-Db9NSHVk.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"layout-wrapper"},R={class:"main-content"},V={class:"container"},$={key:0,class:"stats-grid"},x={class:"stat-card"},A={class:"stat-value"},S={class:"stat-card"},D={class:"stat-value"},M={class:"stat-card"},P={class:"stat-value"},T={class:"stat-card"},I={class:"stat-value"},O={key:1,class:"stats-grid"},j={class:"filters"},q={class:"card"},z={key:0,class:"loading-state"},Q={key:1,class:"table-responsive"},U={class:"table"},G={key:0},H=["onClick"],J={__name:"Billing",setup(K){const u=i(""),r=i(null),c=i([]),v=i(!0),_=i(!0);y(async()=>{var a;try{const s=await b.getOverview();r.value=s.data}catch{window.showError("Erro ao carregar resumo de faturamento")}finally{v.value=!1}try{const s=await b.getCompanies();c.value=((a=s.data)==null?void 0:a.data)??s.data??[]}catch{window.showError("Erro ao carregar empresas")}finally{_.value=!1}});const m=w(()=>c.value.filter(a=>{var s;return(s=a.name)==null?void 0:s.toLowerCase().includes(u.value.toLowerCase())})),d=a=>Number(a??0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),f=a=>({active:"Ativo",inactive:"Inativo",blocked:"Bloqueado"})[a]??a;return(a,s)=>(o(),l("div",N,[k(L),t("main",R,[t("div",V,[s[7]||(s[7]=t("header",{class:"page-header"},[t("div",null,[t("h1",null,"Faturamento"),t("p",null,"Receita e assinaturas das empresas")])],-1)),r.value?(o(),l("div",$,[t("div",x,[s[1]||(s[1]=t("div",{class:"stat-label"},"Receita Total",-1)),t("div",A,n(d(r.value.total_revenue)),1)]),t("div",S,[s[2]||(s[2]=t("div",{class:"stat-label"},"Receita do Mês",-1)),t("div",D,n(d(r.value.monthly_revenue)),1)]),t("div",M,[s[3]||(s[3]=t("div",{class:"stat-label"},"Assinaturas Ativas",-1)),t("div",P,n(r.value.active_subscriptions??0),1)]),t("div",T,[s[4]||(s[4]=t("div",{class:"stat-label"},"Faturas Pendentes",-1)),t("div",I,n(r.value.pending_invoices??0),1)])])):v.value?(o(),l("div",O,[(o(),l(h,null,g(4,e=>t("div",{class:"stat-card skeleton",key:e})),64))])):p("",!0),t("div",j,[C(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>u.value=e),type:"text",placeholder:"Buscar empresa...",class:"search-input"},null,512),[[B,u.value]])]),t("div",q,[_.value?(o(),l("div",z,"Carregando...")):(o(),l("div",Q,[t("table",U,[s[6]||(s[6]=t("thead",null,[t("tr",null,[t("th",null,"Empresa"),t("th",null,"Plano"),t("th",null,"Status"),t("th",null,"Total Faturado"),t("th",null,"Pendente"),t("th",null,"Ações")])],-1)),t("tbody",null,[m.value.length===0?(o(),l("tr",G,[...s[5]||(s[5]=[t("td",{colspan:"6",class:"empty-state"},"Nenhuma empresa encontrada",-1)])])):p("",!0),(o(!0),l(h,null,g(m.value,e=>(o(),l("tr",{key:e.id},[t("td",null,[t("strong",null,n(e.name),1)]),t("td",null,n(e.plan??"—"),1),t("td",null,[t("span",{class:E(["badge",`badge-${e.status}`])},n(f(e.status)),3)]),t("td",null,n(d(e.total_invoiced??0)),1),t("td",null,n(d(e.pending_amount??0)),1),t("td",null,[t("button",{onClick:W=>a.$router.push(`/faturamento/${e.id}`),class:"btn btn-sm btn-primary"},"Ver Detalhe",8,H)])]))),128))])])]))])])])]))}},st=F(J,[["__scopeId","data-v-777ebf28"]]);export{st as default};
