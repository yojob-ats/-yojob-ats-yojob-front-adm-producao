import{r as n,i as w,c as d,g as _,a as t,w as C,e as s,v as i,m as v,F as V,k as h,t as c,f as S,o as p}from"./index-BQyMN7yE.js";import{_ as D}from"./SidebarRecruiter-Cjm4dI9A.js";import{b as g}from"./blog-y9yFgtms.js";import{t as U}from"./apiHelper-CRUk9URl.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"layout-wrapper"},k={class:"main-content"},x={class:"container"},B={class:"page-header"},$={class:"card"},F={class:"form-group"},M={class:"form-group"},N={class:"form-group"},q=["value"],P={class:"form-group"},I={class:"form-group"},R={class:"form-row"},T={class:"form-group"},j={class:"form-group"},L={class:"form-actions"},O=["disabled"],z={__name:"CreateBlog",setup(G){const f=S(),r=n(!1),m=n([]),u=n(null),a=n({title:"",author:"",category_id:"",content:"",published_at:"",status:"draft"});w(async()=>{try{const l=await g.listCategories();m.value=U(l.data)}catch{window.showError("Erro ao carregar categorias")}});function b(l){u.value=l.target.files[0]}async function y(){r.value=!0;try{const l=new FormData;Object.keys(a.value).forEach(o=>{a.value[o]&&l.append(o,a.value[o])}),u.value&&l.append("image",u.value),await g.create(l),window.showSuccess("Artigo criado com sucesso"),f.push("/blog")}catch{window.showError("Erro ao criar artigo")}finally{r.value=!1}}return(l,o)=>(p(),d("div",E,[_(D),t("main",k,[t("div",x,[t("header",B,[o[8]||(o[8]=t("div",null,[t("h1",null,"Novo Artigo"),t("p",null,"Cadastre um novo artigo para o blog")],-1)),t("button",{onClick:o[0]||(o[0]=e=>l.$router.push("/blog")),class:"btn btn-secondary"},"← Voltar")]),t("div",$,[t("form",{onSubmit:C(y,["prevent"])},[t("div",F,[o[9]||(o[9]=t("label",null,"Título",-1)),s(t("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>a.value.title=e),class:"form-control",type:"text",required:"",placeholder:"Digite o título do artigo"},null,512),[[i,a.value.title]])]),t("div",M,[o[10]||(o[10]=t("label",null,"Autor",-1)),s(t("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>a.value.author=e),class:"form-control",type:"text",required:"",placeholder:"Nome do autor"},null,512),[[i,a.value.author]])]),t("div",N,[o[12]||(o[12]=t("label",null,"Categoria",-1)),s(t("select",{"onUpdate:modelValue":o[3]||(o[3]=e=>a.value.category_id=e),class:"form-control"},[o[11]||(o[11]=t("option",{value:""},"Selecione uma categoria",-1)),(p(!0),d(V,null,h(m.value,e=>(p(),d("option",{key:e.id,value:e.id},c(e.name),9,q))),128))],512),[[v,a.value.category_id]])]),t("div",P,[o[13]||(o[13]=t("label",null,"Foto Principal",-1)),t("input",{onChange:b,class:"form-control",type:"file",accept:"image/*"},null,32)]),t("div",I,[o[14]||(o[14]=t("label",null,"Conteúdo",-1)),s(t("textarea",{"onUpdate:modelValue":o[4]||(o[4]=e=>a.value.content=e),class:"form-control",rows:"10",required:"",placeholder:"Digite o conteúdo do artigo..."},null,512),[[i,a.value.content]])]),t("div",R,[t("div",T,[o[15]||(o[15]=t("label",null,"Data de Publicação",-1)),s(t("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>a.value.published_at=e),class:"form-control",type:"date"},null,512),[[i,a.value.published_at]])]),t("div",j,[o[17]||(o[17]=t("label",null,"Status",-1)),s(t("select",{"onUpdate:modelValue":o[6]||(o[6]=e=>a.value.status=e),class:"form-control"},[...o[16]||(o[16]=[t("option",{value:"draft"},"Rascunho",-1),t("option",{value:"published"},"Publicado",-1)])],512),[[v,a.value.status]])])]),t("div",L,[t("button",{type:"button",onClick:o[7]||(o[7]=e=>l.$router.push("/blog")),class:"btn btn-secondary"},"Cancelar"),t("button",{type:"submit",class:"btn btn-primary",disabled:r.value},c(r.value?"Salvando...":"Criar Artigo"),9,O)])],32)])])])]))}},X=A(z,[["__scopeId","data-v-b077d8b8"]]);export{X as default};
