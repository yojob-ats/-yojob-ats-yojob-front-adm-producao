import{l as E,r as d,i as S,c as n,g as V,a as o,w as k,e as l,v as p,m as f,F as C,k as B,t as y,f as U,o as i}from"./index-BW0SG1OL.js";import{_ as x}from"./SidebarRecruiter-CqvTDxCK.js";import{b as v}from"./blog-Bq-OHucs.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"layout-wrapper"},A={class:"main-content"},M={class:"container"},D={class:"page-header"},I={key:0,class:"card loading-state"},P={key:1,class:"card"},q={class:"form-group"},F={class:"form-group"},N={class:"form-group"},T=["value"],z={class:"form-group"},L={class:"form-row"},j={class:"form-group"},G={class:"form-group"},H={class:"form-actions"},J=["disabled"],K={__name:"EditBlog",setup(O){const _=E(),w=U(),c=_.params.id,m=d(!0),u=d(!1),g=d([]),s=d({title:"",author:"",category_id:"",content:"",published_at:"",status:"draft"});S(async()=>{var r,t;try{const[a,b]=await Promise.all([v.getById(c),v.listCategories()]),e=a.data;s.value={title:e.title??"",author:e.author??"",category_id:e.category_id??((r=e.category)==null?void 0:r.id)??"",content:e.content??"",published_at:e.published_at?e.published_at.substring(0,10):"",status:e.status??"draft"},g.value=((t=b.data)==null?void 0:t.data)??b.data??[]}catch{window.showError("Erro ao carregar artigo")}finally{m.value=!1}});async function h(){u.value=!0;try{await v.update(c,s.value),window.showSuccess("Artigo atualizado com sucesso"),w.push("/blog")}catch{window.showError("Erro ao salvar artigo")}finally{u.value=!1}}return(r,t)=>(i(),n("div",$,[V(x),o("main",A,[o("div",M,[o("header",D,[t[8]||(t[8]=o("div",null,[o("h1",null,"Editar Artigo"),o("p",null,"Edite os detalhes do artigo do blog")],-1)),o("button",{onClick:t[0]||(t[0]=a=>r.$router.push("/blog")),class:"btn btn-secondary"},"← Voltar")]),m.value?(i(),n("div",I,"Carregando artigo...")):(i(),n("div",P,[o("form",{onSubmit:k(h,["prevent"])},[o("div",q,[t[9]||(t[9]=o("label",null,"Título",-1)),l(o("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.value.title=a),class:"form-control",type:"text",required:""},null,512),[[p,s.value.title]])]),o("div",F,[t[10]||(t[10]=o("label",null,"Autor",-1)),l(o("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.value.author=a),class:"form-control",type:"text",required:""},null,512),[[p,s.value.author]])]),o("div",N,[t[12]||(t[12]=o("label",null,"Categoria",-1)),l(o("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>s.value.category_id=a),class:"form-control"},[t[11]||(t[11]=o("option",{value:""},"Selecione uma categoria",-1)),(i(!0),n(C,null,B(g.value,a=>(i(),n("option",{key:a.id,value:a.id},y(a.name),9,T))),128))],512),[[f,s.value.category_id]])]),o("div",z,[t[13]||(t[13]=o("label",null,"Conteúdo",-1)),l(o("textarea",{"onUpdate:modelValue":t[4]||(t[4]=a=>s.value.content=a),class:"form-control",rows:"10"},null,512),[[p,s.value.content]])]),o("div",L,[o("div",j,[t[14]||(t[14]=o("label",null,"Data de Publicação",-1)),l(o("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.value.published_at=a),class:"form-control",type:"date"},null,512),[[p,s.value.published_at]])]),o("div",G,[t[16]||(t[16]=o("label",null,"Status",-1)),l(o("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>s.value.status=a),class:"form-control"},[...t[15]||(t[15]=[o("option",{value:"draft"},"Rascunho",-1),o("option",{value:"published"},"Publicado",-1)])],512),[[f,s.value.status]])])]),o("div",H,[o("button",{type:"button",onClick:t[7]||(t[7]=a=>r.$router.push("/blog")),class:"btn btn-secondary"},"Cancelar"),o("button",{type:"submit",class:"btn btn-primary",disabled:u.value},y(u.value?"Salvando...":"Salvar"),9,J)])],32)]))])])]))}},Z=R(K,[["__scopeId","data-v-e17dc49c"]]);export{Z as default};
