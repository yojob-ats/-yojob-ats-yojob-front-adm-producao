import{r as l,i as L,j as Q,c as o,g as T,a as e,d as m,n as S,F as g,e as _,v as q,m as D,k as x,t as c,w as j,o as n,q as P}from"./index-BKKr9w70.js";import{_ as G}from"./SidebarRecruiter-DRdmGgpZ.js";import{f as b}from"./faq-D9GfzZ9h.js";import{t as A}from"./apiHelper-nSI_QOaT.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"layout-wrapper"},J={class:"main-content"},O={class:"container"},W={class:"page-header"},X={class:"tabs"},Y={class:"filters"},Z={class:"card"},ee={key:0,class:"loading-state"},te={key:1,class:"table-responsive"},ae={class:"table"},se={key:0},oe={class:"question-cell"},ne={class:"action-buttons"},le=["onClick"],re=["onClick","disabled"],ie={key:1,class:"card section-card"},ue={class:"section-header"},de={key:0,class:"inline-form"},ce={class:"inline-form-fields"},ve=["disabled"],me={key:1,class:"loading-state"},be={key:2,class:"table-responsive"},ye={class:"table"},pe={key:0},ge={key:0},fe=["onKeyup"],he={class:"action-buttons"},Ce=["onClick"],we=["onClick","disabled"],_e=["onClick","disabled"],ke={__name:"Faq",setup($e){const i=l("faqs"),k=l(""),f=l(""),h=l([]),u=l([]),F=l(!0),$=l(!1),C=l(null),E=l(null),y=l(!1),d=l(!1),v=l(null),p=l(""),w=l({name:""});L(async()=>{try{const s=await b.list();h.value=A(s.data)}catch{window.showError("Erro ao carregar FAQs")}finally{F.value=!1}});async function B(){if(!(u.value.length>0)){$.value=!0;try{const s=await b.listCategories();u.value=A(s.data)}catch{window.showError("Erro ao carregar categorias")}finally{$.value=!1}}}async function M(s){if(confirm("Confirma a exclusão desta pergunta?")){C.value=s;try{await b.delete(s),h.value=h.value.filter(t=>t.id!==s),window.showSuccess("Pergunta removida com sucesso")}catch{window.showError("Erro ao remover pergunta")}finally{C.value=null}}}async function R(){d.value=!0;try{const s=await b.createCategory(w.value);u.value.push(s.data),w.value={name:""},y.value=!1,window.showSuccess("Categoria criada com sucesso")}catch{window.showError("Erro ao criar categoria")}finally{d.value=!1}}function U(s){v.value=s.id,p.value=s.name}async function N(s){d.value=!0;try{await b.updateCategory(s.id,{name:p.value}),s.name=p.value,v.value=null,window.showSuccess("Categoria atualizada")}catch{window.showError("Erro ao atualizar categoria")}finally{d.value=!1}}async function z(s){if(confirm("Confirma a exclusão desta categoria?")){E.value=s;try{await b.deleteCategory(s),u.value=u.value.filter(t=>t.id!==s),window.showSuccess("Categoria removida")}catch{window.showError("Erro ao remover categoria")}finally{E.value=null}}}const V=Q(()=>h.value.filter(s=>{var r;const t=(r=s.question)==null?void 0:r.toLowerCase().includes(k.value.toLowerCase()),a=!f.value||s.status===f.value;return t&&a}));return(s,t)=>(n(),o("div",H,[T(G),e("main",J,[e("div",O,[e("header",W,[t[10]||(t[10]=e("div",null,[e("h1",null,"FAQ"),e("p",null,"Gerencie perguntas frequentes e categorias")],-1)),i.value==="faqs"?(n(),o("button",{key:0,onClick:t[0]||(t[0]=a=>s.$router.push("/faq/novo")),class:"btn btn-primary"},"+ Nova Pergunta")):m("",!0)]),e("div",X,[e("button",{onClick:t[1]||(t[1]=a=>i.value="faqs"),class:S(["tab-btn",{active:i.value==="faqs"}])},"Perguntas",2),e("button",{onClick:t[2]||(t[2]=a=>{i.value="categorias",B()}),class:S(["tab-btn",{active:i.value==="categorias"}])},"Categorias",2)]),i.value==="faqs"?(n(),o(g,{key:0},[e("div",Y,[_(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>k.value=a),type:"text",placeholder:"Buscar pergunta...",class:"search-input"},null,512),[[q,k.value]]),_(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>f.value=a),class:"select-input"},[...t[11]||(t[11]=[e("option",{value:""},"Todos os Status",-1),e("option",{value:"published"},"Publicado",-1),e("option",{value:"draft"},"Rascunho",-1)])],512),[[D,f.value]])]),e("div",Z,[F.value?(n(),o("div",ee,"Carregando...")):(n(),o("div",te,[e("table",ae,[t[13]||(t[13]=e("thead",null,[e("tr",null,[e("th",null,"Pergunta"),e("th",null,"Categoria"),e("th",null,"Status"),e("th",null,"Ações")])],-1)),e("tbody",null,[V.value.length===0?(n(),o("tr",se,[...t[12]||(t[12]=[e("td",{colspan:"4",class:"empty-state"},"Nenhuma pergunta encontrada",-1)])])):m("",!0),(n(!0),o(g,null,x(V.value,a=>{var r;return n(),o("tr",{key:a.id},[e("td",oe,c(a.question),1),e("td",null,c(((r=a.category)==null?void 0:r.name)??a.category??"—"),1),e("td",null,[e("span",{class:S(["badge",`badge-${a.status}`])},c(a.status==="published"?"Publicado":"Rascunho"),3)]),e("td",ne,[e("button",{onClick:K=>s.$router.push(`/faq/editar/${a.id}`),class:"btn btn-sm btn-primary"},"Editar",8,le),e("button",{onClick:K=>M(a.id),class:"btn btn-sm btn-danger",disabled:C.value===a.id},c(C.value===a.id?"...":"Remover"),9,re)])])}),128))])])]))])],64)):m("",!0),i.value==="categorias"?(n(),o("div",ie,[e("div",ue,[t[14]||(t[14]=e("h2",{class:"section-title"},"Categorias",-1)),e("button",{onClick:t[5]||(t[5]=a=>y.value=!y.value),class:"btn btn-sm btn-primary"},c(y.value?"Cancelar":"+ Nova Categoria"),1)]),y.value?(n(),o("div",de,[e("form",{onSubmit:j(R,["prevent"])},[e("div",ce,[_(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>w.value.name=a),class:"form-control",type:"text",placeholder:"Nome da categoria",required:""},null,512),[[q,w.value.name]]),e("button",{type:"submit",class:"btn btn-primary",disabled:d.value},c(d.value?"Salvando...":"Salvar"),9,ve)])],32)])):m("",!0),$.value?(n(),o("div",me,"Carregando...")):(n(),o("div",be,[e("table",ye,[t[16]||(t[16]=e("thead",null,[e("tr",null,[e("th",null,"Nome"),e("th",null,"Ações")])],-1)),e("tbody",null,[u.value.length===0?(n(),o("tr",pe,[...t[15]||(t[15]=[e("td",{colspan:"2",class:"empty-state"},"Nenhuma categoria cadastrada",-1)])])):m("",!0),(n(!0),o(g,null,x(u.value,a=>(n(),o("tr",{key:a.id},[e("td",null,[v.value!==a.id?(n(),o("span",ge,c(a.name),1)):_((n(),o("input",{key:1,"onUpdate:modelValue":t[7]||(t[7]=r=>p.value=r),class:"form-control form-control-inline",onKeyup:[P(r=>N(a),["enter"]),t[8]||(t[8]=P(r=>v.value=null,["esc"]))]},null,40,fe)),[[q,p.value]])]),e("td",he,[v.value!==a.id?(n(),o(g,{key:0},[e("button",{onClick:r=>U(a),class:"btn btn-sm btn-secondary"},"Editar",8,Ce),e("button",{onClick:r=>z(a.id),class:"btn btn-sm btn-danger",disabled:E.value===a.id},"Remover",8,we)],64)):(n(),o(g,{key:1},[e("button",{onClick:r=>N(a),class:"btn btn-sm btn-primary",disabled:d.value},"Salvar",8,_e),e("button",{onClick:t[9]||(t[9]=r=>v.value=null),class:"btn btn-sm btn-secondary"},"Cancelar")],64))])]))),128))])])]))])):m("",!0)])])]))}},Ve=I(ke,[["__scopeId","data-v-bd4069c1"]]);export{Ve as default};
