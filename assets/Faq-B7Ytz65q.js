import{r as l,i as K,j as L,c as o,g as Q,a as e,d as m,n as S,F as p,e as _,v as q,m as T,k as x,t as c,w as D,o as n,q as P}from"./index-CBT-DF28.js";import{_ as j}from"./SidebarRecruiter-DDRAIM96.js";import{f as b}from"./faq-D5GBxYgp.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"layout-wrapper"},H={class:"main-content"},J={class:"container"},O={class:"page-header"},W={class:"tabs"},X={class:"filters"},Y={class:"card"},Z={key:0,class:"loading-state"},ee={key:1,class:"table-responsive"},te={class:"table"},ae={key:0},se={class:"question-cell"},oe={class:"action-buttons"},ne=["onClick"],le=["onClick","disabled"],re={key:1,class:"card section-card"},ie={class:"section-header"},ue={key:0,class:"inline-form"},de={class:"inline-form-fields"},ce=["disabled"],ve={key:1,class:"loading-state"},me={key:2,class:"table-responsive"},be={class:"table"},ye={key:0},ge={key:0},pe=["onKeyup"],fe={class:"action-buttons"},he=["onClick"],Ce=["onClick","disabled"],we=["onClick","disabled"],_e={__name:"Faq",setup(ke){const i=l("faqs"),k=l(""),f=l(""),h=l([]),u=l([]),F=l(!0),$=l(!1),C=l(null),E=l(null),y=l(!1),d=l(!1),v=l(null),g=l(""),w=l({name:""});K(async()=>{var s;try{const t=await b.list();h.value=((s=t.data)==null?void 0:s.data)??t.data??[]}catch{window.showError("Erro ao carregar FAQs")}finally{F.value=!1}});async function A(){var s;if(!(u.value.length>0)){$.value=!0;try{const t=await b.listCategories();u.value=((s=t.data)==null?void 0:s.data)??t.data??[]}catch{window.showError("Erro ao carregar categorias")}finally{$.value=!1}}}async function B(s){if(confirm("Confirma a exclusão desta pergunta?")){C.value=s;try{await b.delete(s),h.value=h.value.filter(t=>t.id!==s),window.showSuccess("Pergunta removida com sucesso")}catch{window.showError("Erro ao remover pergunta")}finally{C.value=null}}}async function M(){d.value=!0;try{const s=await b.createCategory(w.value);u.value.push(s.data),w.value={name:""},y.value=!1,window.showSuccess("Categoria criada com sucesso")}catch{window.showError("Erro ao criar categoria")}finally{d.value=!1}}function R(s){v.value=s.id,g.value=s.name}async function N(s){d.value=!0;try{await b.updateCategory(s.id,{name:g.value}),s.name=g.value,v.value=null,window.showSuccess("Categoria atualizada")}catch{window.showError("Erro ao atualizar categoria")}finally{d.value=!1}}async function U(s){if(confirm("Confirma a exclusão desta categoria?")){E.value=s;try{await b.deleteCategory(s),u.value=u.value.filter(t=>t.id!==s),window.showSuccess("Categoria removida")}catch{window.showError("Erro ao remover categoria")}finally{E.value=null}}}const V=L(()=>h.value.filter(s=>{var r;const t=(r=s.question)==null?void 0:r.toLowerCase().includes(k.value.toLowerCase()),a=!f.value||s.status===f.value;return t&&a}));return(s,t)=>(n(),o("div",I,[Q(j),e("main",H,[e("div",J,[e("header",O,[t[10]||(t[10]=e("div",null,[e("h1",null,"FAQ"),e("p",null,"Gerencie perguntas frequentes e categorias")],-1)),i.value==="faqs"?(n(),o("button",{key:0,onClick:t[0]||(t[0]=a=>s.$router.push("/faq/novo")),class:"btn btn-primary"},"+ Nova Pergunta")):m("",!0)]),e("div",W,[e("button",{onClick:t[1]||(t[1]=a=>i.value="faqs"),class:S(["tab-btn",{active:i.value==="faqs"}])},"Perguntas",2),e("button",{onClick:t[2]||(t[2]=a=>{i.value="categorias",A()}),class:S(["tab-btn",{active:i.value==="categorias"}])},"Categorias",2)]),i.value==="faqs"?(n(),o(p,{key:0},[e("div",X,[_(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>k.value=a),type:"text",placeholder:"Buscar pergunta...",class:"search-input"},null,512),[[q,k.value]]),_(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>f.value=a),class:"select-input"},[...t[11]||(t[11]=[e("option",{value:""},"Todos os Status",-1),e("option",{value:"published"},"Publicado",-1),e("option",{value:"draft"},"Rascunho",-1)])],512),[[T,f.value]])]),e("div",Y,[F.value?(n(),o("div",Z,"Carregando...")):(n(),o("div",ee,[e("table",te,[t[13]||(t[13]=e("thead",null,[e("tr",null,[e("th",null,"Pergunta"),e("th",null,"Categoria"),e("th",null,"Status"),e("th",null,"Ações")])],-1)),e("tbody",null,[V.value.length===0?(n(),o("tr",ae,[...t[12]||(t[12]=[e("td",{colspan:"4",class:"empty-state"},"Nenhuma pergunta encontrada",-1)])])):m("",!0),(n(!0),o(p,null,x(V.value,a=>{var r;return n(),o("tr",{key:a.id},[e("td",se,c(a.question),1),e("td",null,c(((r=a.category)==null?void 0:r.name)??a.category??"—"),1),e("td",null,[e("span",{class:S(["badge",`badge-${a.status}`])},c(a.status==="published"?"Publicado":"Rascunho"),3)]),e("td",oe,[e("button",{onClick:z=>s.$router.push(`/faq/editar/${a.id}`),class:"btn btn-sm btn-primary"},"Editar",8,ne),e("button",{onClick:z=>B(a.id),class:"btn btn-sm btn-danger",disabled:C.value===a.id},c(C.value===a.id?"...":"Remover"),9,le)])])}),128))])])]))])],64)):m("",!0),i.value==="categorias"?(n(),o("div",re,[e("div",ie,[t[14]||(t[14]=e("h2",{class:"section-title"},"Categorias",-1)),e("button",{onClick:t[5]||(t[5]=a=>y.value=!y.value),class:"btn btn-sm btn-primary"},c(y.value?"Cancelar":"+ Nova Categoria"),1)]),y.value?(n(),o("div",ue,[e("form",{onSubmit:D(M,["prevent"])},[e("div",de,[_(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>w.value.name=a),class:"form-control",type:"text",placeholder:"Nome da categoria",required:""},null,512),[[q,w.value.name]]),e("button",{type:"submit",class:"btn btn-primary",disabled:d.value},c(d.value?"Salvando...":"Salvar"),9,ce)])],32)])):m("",!0),$.value?(n(),o("div",ve,"Carregando...")):(n(),o("div",me,[e("table",be,[t[16]||(t[16]=e("thead",null,[e("tr",null,[e("th",null,"Nome"),e("th",null,"Ações")])],-1)),e("tbody",null,[u.value.length===0?(n(),o("tr",ye,[...t[15]||(t[15]=[e("td",{colspan:"2",class:"empty-state"},"Nenhuma categoria cadastrada",-1)])])):m("",!0),(n(!0),o(p,null,x(u.value,a=>(n(),o("tr",{key:a.id},[e("td",null,[v.value!==a.id?(n(),o("span",ge,c(a.name),1)):_((n(),o("input",{key:1,"onUpdate:modelValue":t[7]||(t[7]=r=>g.value=r),class:"form-control form-control-inline",onKeyup:[P(r=>N(a),["enter"]),t[8]||(t[8]=P(r=>v.value=null,["esc"]))]},null,40,pe)),[[q,g.value]])]),e("td",fe,[v.value!==a.id?(n(),o(p,{key:0},[e("button",{onClick:r=>R(a),class:"btn btn-sm btn-secondary"},"Editar",8,he),e("button",{onClick:r=>U(a.id),class:"btn btn-sm btn-danger",disabled:E.value===a.id},"Remover",8,Ce)],64)):(n(),o(p,{key:1},[e("button",{onClick:r=>N(a),class:"btn btn-sm btn-primary",disabled:d.value},"Salvar",8,we),e("button",{onClick:t[9]||(t[9]=r=>v.value=null),class:"btn btn-sm btn-secondary"},"Cancelar")],64))])]))),128))])])]))])):m("",!0)])])]))}},Fe=G(_e,[["__scopeId","data-v-8cafcb37"]]);export{Fe as default};
