import{r as i,i as y,j as w,c as l,g as k,a as t,d as p,t as n,F as h,k as g,e as C,v as B,o,n as E}from"./index-BQyMN7yE.js";import{_ as L}from"./SidebarRecruiter-Cjm4dI9A.js";import{b}from"./billing-CUF9lM6g.js";import{t as A}from"./apiHelper-CRUk9URl.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"layout-wrapper"},R={class:"main-content"},V={class:"container"},$={key:0,class:"stats-grid"},x={class:"stat-card"},S={class:"stat-value"},D={class:"stat-card"},M={class:"stat-value"},P={class:"stat-card"},T={class:"stat-value"},I={class:"stat-card"},O={class:"stat-value"},j={key:1,class:"stats-grid"},q={class:"filters"},z={class:"card"},Q={key:0,class:"loading-state"},U={key:1,class:"table-responsive"},G={class:"table"},H={key:0},J=["onClick"],K={__name:"Billing",setup(W){const u=i(""),r=i(null),c=i([]),v=i(!0),_=i(!0);y(async()=>{try{const e=await b.getOverview();r.value=e.data}catch{window.showError("Erro ao carregar resumo de faturamento")}finally{v.value=!1}try{const e=await b.getCompanies();c.value=A(e.data)}catch{window.showError("Erro ao carregar empresas")}finally{_.value=!1}});const m=w(()=>c.value.filter(e=>{var s;return(s=e.name)==null?void 0:s.toLowerCase().includes(u.value.toLowerCase())})),d=e=>Number(e??0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),f=e=>({active:"Ativo",inactive:"Inativo",blocked:"Bloqueado"})[e]??e;return(e,s)=>(o(),l("div",N,[k(L),t("main",R,[t("div",V,[s[7]||(s[7]=t("header",{class:"page-header"},[t("div",null,[t("h1",null,"Faturamento"),t("p",null,"Receita e assinaturas das empresas")])],-1)),r.value?(o(),l("div",$,[t("div",x,[s[1]||(s[1]=t("div",{class:"stat-label"},"Receita Total",-1)),t("div",S,n(d(r.value.total_revenue)),1)]),t("div",D,[s[2]||(s[2]=t("div",{class:"stat-label"},"Receita do Mês",-1)),t("div",M,n(d(r.value.monthly_revenue)),1)]),t("div",P,[s[3]||(s[3]=t("div",{class:"stat-label"},"Assinaturas Ativas",-1)),t("div",T,n(r.value.active_subscriptions??0),1)]),t("div",I,[s[4]||(s[4]=t("div",{class:"stat-label"},"Faturas Pendentes",-1)),t("div",O,n(r.value.pending_invoices??0),1)])])):v.value?(o(),l("div",j,[(o(),l(h,null,g(4,a=>t("div",{class:"stat-card skeleton",key:a})),64))])):p("",!0),t("div",q,[C(t("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>u.value=a),type:"text",placeholder:"Buscar empresa...",class:"search-input"},null,512),[[B,u.value]])]),t("div",z,[_.value?(o(),l("div",Q,"Carregando...")):(o(),l("div",U,[t("table",G,[s[6]||(s[6]=t("thead",null,[t("tr",null,[t("th",null,"Empresa"),t("th",null,"Plano"),t("th",null,"Status"),t("th",null,"Total Faturado"),t("th",null,"Pendente"),t("th",null,"Ações")])],-1)),t("tbody",null,[m.value.length===0?(o(),l("tr",H,[...s[5]||(s[5]=[t("td",{colspan:"6",class:"empty-state"},"Nenhuma empresa encontrada",-1)])])):p("",!0),(o(!0),l(h,null,g(m.value,a=>(o(),l("tr",{key:a.id},[t("td",null,[t("strong",null,n(a.name),1)]),t("td",null,n(a.plan??"—"),1),t("td",null,[t("span",{class:E(["badge",`badge-${a.status}`])},n(f(a.status)),3)]),t("td",null,n(d(a.total_invoiced??0)),1),t("td",null,n(d(a.pending_amount??0)),1),t("td",null,[t("button",{onClick:X=>e.$router.push(`/faturamento/${a.id}`),class:"btn btn-sm btn-primary"},"Ver Detalhe",8,J)])]))),128))])])]))])])])]))}},at=F(K,[["__scopeId","data-v-b79e608b"]]);export{at as default};
